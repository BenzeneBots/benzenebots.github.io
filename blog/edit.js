let editor,modals;const today=()=>{let e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`};let post={published:today(),title:"",content:"",images:[]},postModified=post;function editorRefresh(){let e=tinymce.activeEditor.getContent();document.getElementById("content").innerHTML=e,localStorage.setItem("blog_draft",e)}function editorInit(){null!==localStorage.getItem("blog_draft")&&tinymce.activeEditor.setContent(localStorage.getItem("blog_draft")),document.getElementById("content").innerHTML=localStorage.getItem("blog_draft"),editorRefresh()}let configTinyMCE={selector:"textarea",theme_advanced_resizing:!1,resize:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste imagetools wordcount","codesample emoticons media wordcount slashcommands"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media| emoticons codesample wordcount | gallery",editor:"restore_draft",toolbar_mode:"floating",automatic_uploads:!0,image_title:!0,file_picker_types:"image",file_picker_callback:function(e,t,n){var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.onchange=function(){var t=this.files[0],n=new FileReader;n.onload=async function(){const n=new FormData;n.append("image",t);let o=await fetch("https://api.benzenebots.com/store/upload",{method:"POST",headers:{password:"5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8",id:"a34de56a-bb3a-483a-8d96-e95f885b3396"},body:n}),i=await o.json(),a=await fetch("https://api.benzenebots.com/gallery",{method:"POST",headers:{password:"5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8",id:"a34de56a-bb3a-483a-8d96-e95f885b3396"},body:n});await a.json();e("https://api.benzenebots.com/"+i.id,{title:t.name})},n.readAsDataURL(t)},o.click()},setup:function(e){e.on("init",editorInit),e.on("Paste Change NodeChange Input Undo Redo",(function(e){editorRefresh()})),e.ui.registry.addButton("gallery",{icon:"gallery",onAction:function(e){tinyMCE.activeEditor.windowManager.open({title:"My Gallery",size:"large",body:{type:"panel",items:[{type:"htmlpanel",html:'<div class="gallery-div"><input type="hidden" id="image"/>Your Gallery Items Html</div>'}]},buttons:[{type:"cancel",name:"closeButton",text:"Cancel"},{type:"submit",name:"submitButton",text:"Insert To Editor",primary:!0}],onSubmit:function(e){}})}})},image_caption:!0,branding:!1,skin:"oxide-dark",icons:"thin",content_css:"dark"};tinymce.PluginManager.add("slashcommands",(function(e){var t=[{text:"Heading 1",icon:"h1",action:function(){e.execCommand("mceInsertContent",!1,"<h1>Heading 1</h1>"),e.selection.select(e.selection.getNode())}},{text:"Heading 2",icon:"h2",action:function(){e.execCommand("mceInsertContent",!1,"<h2>Heading 2</h2>"),e.selection.select(e.selection.getNode())}},{text:"Heading 3",icon:"h3",action:function(){e.execCommand("mceInsertContent",!1,"<h3>Heading 3</h3>"),e.selection.select(e.selection.getNode())}},{type:"separator"},{text:"Paragraph",icon:"p",action:function(){e.execCommand("mceInsertContent",!1,"<p>Paragraph</p>"),e.selection.select(e.selection.getNode())}},{type:"separator"},{text:"Bulleted list",icon:"unordered-list",action:function(){e.execCommand("InsertUnorderedList",!1)}},{text:"Numbered list",icon:"ordered-list",action:function(){e.execCommand("InsertOrderedList",!1)}}];return e.ui.registry.addAutocompleter("slashcommands",{ch:"/",minChars:0,columns:1,fetch:function(e){const n=t.filter((function(t){return"separator"===t.type||-1!==t.text.toLowerCase().indexOf(e.toLowerCase())}));return new tinymce.util.Promise((function(e){e(n.map((function(e){return{meta:e,text:e.text,icon:e.icon,value:e.text,type:e.type}})))}))},onAction:function(t,n,o,i){e.selection.setRng(n),e.execCommand("Delete"),i.action(),t.hide()}}),{}})),tinyMCE.remove("textarea"),tinyMCE.init(configTinyMCE);